<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Master Control v3.0</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #0d1117; color: #adbac7; padding: 20px; }
        .card { background: #22272e; border: 1px solid #444c56; border-radius: 6px; padding: 15px; margin-bottom: 15px; }
        .value { color: #539bf5; font-weight: bold; font-family: monospace; font-size: 1.2em; }
        .status { color: #57ab5a; font-size: 0.9em; }
    </style>
</head>
<body>
    <h2>Operational Dashboard</h2>
    <div id="conn-status">Connecting...</div>

    <div class="card">
        <div>Detected Account:</div>
        <div id="acc_field" class="value">None</div>
    </div>

    <div class="card">
        <div>Available Balance:</div>
        <div id="cash_field" class="value">0.00</div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAoAfx2voGpTuXh2I-V2XpgOyn5kAM6YIA",
            authDomain: "sudancontrol-c5050.firebaseapp.com",
            databaseURL: "https://sudancontrol-c5050-default-rtdb.firebaseio.com",
            projectId: "sudancontrol-c5050",
            appId: "1:111262781250:android:1b7bebdb45d69df294c2db"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Listen to all potential paths to ensure no data is missed
        db.ref().on('value', (snapshot) => {
            document.getElementById('conn-status').innerText = "System Online";
            const data = snapshot.val();
            
            // Checking path: Account
            if(data.Account) {
                let acc = "";
                Object.keys(data.Account).forEach(key => acc = key);
                document.getElementById('acc_field').innerText = acc;
            }
            
            // Checking path: Cash
            if(data.Cash) {
                document.getElementById('cash_field').innerText = data.Cash;
            }
            
            // Checking path: Updates (The one in your Smali code)
            if(data.Updates) {
                Object.values(data.Updates).forEach(val => {
                    if(val.Account) document.getElementById('acc_field').innerText = val.Account;
                    if(val.Cash) document.getElementById('cash_field').innerText = val.Cash;
                });
            }
        });
    </script>
</body>
</html>
